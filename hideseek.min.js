/**
 * HideSeek jQuery plugin
 *
 * @copyright Copyright 2015, Dimitris Krestos
 * @license   Apache License, Version 2.0 (http://www.opensource.org/licenses/apache2.0.php)
 * @link      http://vdw.staytuned.gr
 * @version   v0.9.0
 *
 * 0.9.0 - Fixed bug to catch delete key as well as backspace
 *
 * Dependencies are include in minified versions at the bottom:
 * 1. Highlight v4 by Johann Burkard
 *
 */
!function(e,t,i){"use strict";e.fn.hideseek=function(t){t=e.extend({list:".hideseek-data",nodata:"",attribute:"text",matches:!1,highlight:!1,ignore:"",headers:"",navigation:!1,ignore_accents:!1,hidden_mode:!1,min_chars:1},t);return this.each((function(){var i=e(this);i.opts=[],e.map(["list","nodata","attribute","matches","highlight","ignore","headers","navigation","ignore_accents","hidden_mode","min_chars"],(function(e,s){i.opts[e]=i.data(e)||t[e]})),i.opts.headers&&(i.opts.ignore+=i.opts.ignore?", "+i.opts.headers:i.opts.headers);var s=e(i.opts.list);i.opts.navigation&&i.attr("autocomplete","off"),i.opts.hidden_mode&&s.children().hide(),i.keyup((function(t){if(-1==[38,40,13].indexOf(t.keyCode)&&(8==t.keyCode||46===t.keyCode||i.val().length>=i.opts.min_chars)){var n=i.val().toLowerCase();s.children(i.opts.ignore.trim()?":not("+i.opts.ignore+")":"").removeClass("selected").each((function(){var t=("text"!=i.opts.attribute?e(this).attr(i.opts.attribute)||"":e(this).text()).toLowerCase();-1==t.removeAccents(i.opts.ignore_accents).indexOf(n)||n===(!!i.opts.hidden_mode&&"")?e(this).hide():(o(e(this)),i.opts.matches&&null!==n.match(new RegExp(Object.keys(i.opts.matches)[0]))&&(null!==t.match(new RegExp(Object.values(i.opts.matches)[0]))?o(e(this)):e(this).hide())),i.trigger("_after_each")})),i.opts.nodata&&(s.find(".no-results").remove(),s.children(':not([style*="display: none"])').length||(s.children().first().clone().removeHighlight().addClass("no-results").show().prependTo(i.opts.list).text(i.opts.nodata),i.trigger("_after_nodata"))),i.opts.headers&&e(i.opts.headers,s).each((function(){e(this).nextUntil(i.opts.headers).not('[style*="display: none"],'+i.opts.ignore).length?e(this).show():e(this).hide()})),i.trigger("_after")}function o(e){i.opts.highlight?e.removeHighlight().highlight(n).show():e.show()}function a(e){return e.children(".selected:visible")}var r;i.opts.navigation&&(38==t.keyCode?a(s).length?((r=s,a(r).prevAll(":visible:first")).addClass("selected"),a(s).last().removeClass("selected")):s.children(":visible").last().addClass("selected"):40==t.keyCode?a(s).length?(function(e){return a(e).nextAll(":visible:first")}(s).addClass("selected"),a(s).first().removeClass("selected")):s.children(":visible").first().addClass("selected"):13==t.keyCode&&(a(s).find("a").length?document.location=a(s).find("a").attr("href"):i.val(a(s).text())))}))}))},e(document).ready((function(){e('[data-toggle="hideseek"]').hideseek()}))}(jQuery),jQuery.fn.highlight=function(e){function t(e,i){var s=0;if(3==e.nodeType){var n=e.data.removeAccents(!0).toUpperCase().indexOf(i);if(n>=0){var o=document.createElement("mark");o.className="highlight";var a=e.splitText(n);a.splitText(i.length);var r=a.cloneNode(!0);o.appendChild(r),a.parentNode.replaceChild(o,a),s=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var h=0;h<e.childNodes.length;++h)h+=t(e.childNodes[h],i);return s}return this.length&&e&&e.length?this.each((function(){t(this,e.toUpperCase())})):this},jQuery.fn.removeHighlight=function(){return this.find("mark.highlight").each((function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()})).end()},String.prototype.removeAccents=function(e){return e?this.replace(/[áàãâä]/gi,"a").replace(/[éè¨ê]/gi,"e").replace(/[íìïî]/gi,"i").replace(/[óòöôõ]/gi,"o").replace(/[úùüû]/gi,"u").replace(/[ç]/gi,"c").replace(/[ñ]/gi,"n"):this};
